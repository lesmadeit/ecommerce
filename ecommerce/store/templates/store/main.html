<!DOCTYPE html>
{% load static %}
<html>

<head>
  <title>Ecom</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ+4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w==" crossorigin="anonymous" />
    <link rel="stylesheet" href="styles.css">

  <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    

  <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1" />

  <script type="text/javascript">
    var user = '{{request.user}}'

    function getToken(name) {
      var cookieValue = null;
      if (document.cookie && document.cookie !== '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
          var cookie = cookies[i].trim();
          //Does this cookie string begin with the name we want?
          if (cookie.substring(0, name.length + 1) === (name + '=')) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
          }
        }
      }
      return cookieValue;
    }
    var csrftoken = getToken('csrftoken');

    function getCookie(name) {
      //Split cookie string and get all individual name=value pairs in an array
      var cookieArr = document.cookie.split(";");

      //loop through the array elements
      for (var i = 0; i < cookieArr.length; i++) {
        var cookiePair = cookieArr[i].split("=");

        /*removing whirespace at the beginning of the cookie name and
        compare it with the given string*/
        if (name == cookiePair[0].trim()) {
          //decode the cookie value and return
          return decodeURIComponent(cookiePair[1]);
        }
      }
      //return null if not found
      return null;
    }
    var cart = JSON.parse(getCookie('cart'))
    if (cart == undefined) {
      cart = {}
      console.log('Cart was created')
      document.cookie = 'cart=' + JSON.stringify(cart) + ";domain;path=/"
    }
    console.log('Cart:', cart)



  </script>
</head>

<body>

  <header>
    <a href="{% url 'store' %}" class="logo">Ahadi Stores</a>
    <nav>
        <ul>
            <li><a href="{% url 'store' %}">Store</a></li>
            <li><a href="#">Login</a></li>
            <li><a href="{% url 'cart' %}" > <img id="cart-icon" src="{% static 'images/cart.png' %}"></a></li>
            <p id="cart-total">{{cartItems}}</p>
            
        </ul>
    </nav>
</header>

  <div class="container">
    {% block content %}

    {% endblock content %}
  </div>


  <script src="static/js/jquery-3.4.1.slim.min.js"></script>

  <script src="static/js/bootstrap.bundle.min.js"></script>

  <script src="static/js/bootstrap.min.js"></script>
   
  <script type="text/javascript" src="{% static 'js/cart.js' %}"></script>
</body>

</html>